# Hubspot
Если Вам нужно сделать многошаговою форму, которая будет отправлять данные в контакты Hubspot, то для начала Вам нужно создать форму в Hubspot Forms, и просто создать там нужные (все) поля, которые должны быть на всех шагах многошаговой формы. 
  
Если у Вас уже есть рабочая многошаговая форма - это хорошо. Но если все-же нет, то Вам или вашему разработчику нужно ее сделать. Можно сделать с помощью ajax, что-бы при переходе на следующий шаг страница не перезагружалась. В моем примере, у меня для каждого шага были созданные html страницы с именем part_0, part_1, part_2 и так далее, было созданно столько, сколько будет шагов формы. 

После того, когда я создал все шаги, с помощью js я сделал переходы между этими шагами. Например на первом шаге у меня есть вопрос и 4 варианта ответа, после клика на любой ответ происходит переход на следующий шаг.

Не обязательно делать так, что-бы форма куда-нибудь отправляла данные. Можно просто после клика на кнопку "Отправить", на последнем шаге, сделать всплывающее окно благодарности и очистку полей формы.

Также шаги можно например сделать через слайдер, как вам будет легче и удобнее.

Теперь нужно начинать интеграцию формы Hubspot с нашей формой.

Для начала нужно в настройках Hubpot формы, в разделе "Стиль и предварительный просмотр", переключиться на "Установить как необработанную форму HTML", что-бы мы могли самостоятельно, с помощью css и js изменять Hubspot форму уже на нашем сайте http://joxi.ru/KAxJloKtZJV6Pm. Далее сохраняем все изменения и копируем код формы к себе на страницу. Желательно вставить код где-то после нашей формы. В дальнейшем мы сделаем ее невидимой, поэтому внешний вид и расположения нас не сильно волнует. 

Далее буду описывать реализацию на своем примере.

У меня на каждом шаге есть 2-4 варианта ответа, то-есть без кнопки для перехода на следующий шаг. Переход происходит при клике на любой из ответов. Каждый ответ у меня сделан с помощью input radio и кастомного label. Переход происходит при смене значения в одном из этих input.
Для группы input-ов я дал им одинаковый атрибут name=step1, что-бы смотреть на изминение на один из них. Атрибут value также нужно дать всем input, но уже для каждого свое. Именно value будет передаваться в поля Hubspot формы.

Далее с помощью js, точнее jQuery, пишем событие on change для input. В нем создем переменную и присваиваем ей значение value нашего input. 

Смотрим теперь на форму Hubspot. Через инспектор находим id input-a, в который нужно передать данные для первого шага. Берем этот id и для его value пишем нашу переменную которую мы написаля выше. В конце нужно написать .change(), что-бы все сработало.

Пример моего кода: 

    $('form').on('change', 'input[name=step1]', function (e) {

      var step1 = $(this).val();
      $('#gesuchter_bereich_hrsv-3cedf7a4-fe39-4088-98c7-273b0547d2ab').val(step1).change();
  
    });

Если все сделано верно, то в нужном поле формы Hubspot Вы увидите значение того варианта ответа, на которые ви кликнули. 

На последнем шаге у меня 4 поля которые нужно заполнить (Имя, фамилия, Телефон, Почта), чек-бокс соглашения политики конфиденциальности и кнопка отправки. Всем полям (кроме чек-бокса), я дал одинаковый класс, что-бы через одно имя класса провериветь все поля.
Все поля я сделал обязательными, и также в js я прописал проверку на заполненность всех этих полей, при клике на кнопку отправки. Нужно для того, что-бы только после этого у нас передались вместе все данные с этих полей и сработал паралельно клик на кнопку отправки формы Hubspot.

Пример:

    $('form').on('click', '.stepLastButton', function (e) {
      if( ($('.input_final').val() !== '')) && ($('input[name="check_box"]').is(':checked')) ) {
        var Name = $('input[name=name]').val();
        $('#firstname-3cedf7a4-fe39-4088-98c7-273b0547d2ab').val(Name).change();
        $('.hs-button.primary.large').click();
      }
    });

После этого, все должно работать.
